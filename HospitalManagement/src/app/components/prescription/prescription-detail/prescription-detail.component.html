<div class="card">
  <div class="container mt-4 prescription-wrapper" *ngIf="!isLoading && prescription">

    <div class="card-header">
      <!-- Header Section -->
      <div class="text-center mb-4 border-bottom pb-3">
        <h2 class="fw-bold">Medical Prescription</h2>
        <small class="text-muted">Generated by Clinic System</small>
        <h5 class="align-items-end">Dr.{{ prescription.firstName }} {{ prescription.lastName }}</h5>
        <h6>MBBS(Dhaka Medical College),MSc,MD(Medicine),FICP(Pg),FRCP,FRCP,FBAS(PG)</h6>
      </div>
      <div class="row">
        <div class="col-4">Token Number: {{ prescription.tokenNumber }}</div>
        <div class="col-4"></div>
        <div class="col-4">Date: {{ prescription.prescriptionDate | date:'mediumDate' }} </div>
      </div>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-4">

          <!-- Assesment Section -->
          <div *ngIf="prescription.assessment" class="border p-3 mb-4">
            <h6 class="bg-info text-white p-2 mb-3">Assessment</h6>
            <p> ● {{ prescription.assessment }}</p>
          </div>

  <!-- Diagnosis Section -->
          <div *ngIf="prescription.prescriptionDiagnoses.length > 0" class="border p-3 mb-4">
            <h5 class="bg-info text-white p-2 mb-3">Diagnosis</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item" *ngFor="let diag of prescription.prescriptionDiagnoses">
                ● {{ diag.diagnosisTitle }}
              </li>
            </ul>
          </div>

            <!-- Symptom Section -->
          <div *ngIf="prescription.physicalSymptoms.length > 0" class="border p-3 mb-4">
            <h5 class="bg-info text-white p-2 mb-3">Physical Symptoms</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item" *ngFor="let phy of prescription.physicalSymptoms">
                ● {{ phy.symptomDescription }}
              </li>
            </ul>
          </div>

          <!-- Tests Section -->
          <div *ngIf="prescription.prescriptionTests.length > 0" class="border p-3 mb-4">
            <h5 class="bg-info text-white p-2 mb-3">Recommended Tests</h5>
            <ul class="list-group list-group-flush">
              <ol class="list-group-item" *ngFor="let test of prescription.prescriptionTests">
                ● {{ test.testName }}
              </ol>
            </ul>
          </div>

        

          <!-- Advice Section -->
          <div *ngIf="prescription.prescriptionAdvices.length > 0" class="border p-3 mb-4">
            <h5 class="bg-info text-white p-2 mb-3">Advice</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item" *ngFor="let advice of prescription.prescriptionAdvices">
                ● {{ advice.advice }}
              </li>
            </ul>
          </div>
          <p class="align-items-end"><strong>Next Visit:</strong>
            <span *ngIf="prescription.nextVisitDate; else naBlock">
              {{ prescription.nextVisitDate | date:'mediumDate' }}
            </span>
            <ng-template #naBlock>N/A</ng-template>
          </p>

        </div>

        <div class="col-md-8 text-end">
          <h5 class="bg-success text-white p-2 mb-3">Prescribed Medicines</h5>
       
          <div *ngFor="let med of prescription.prescriptionMedicines">
         
            <p>
             <strong> Medicine :</strong> {{ med.medicineName }} <br>
              <strong> Dosage :</strong>  {{ med.dosage }} (mg)<br>
              <strong> Frequency :</strong>  {{ med.frequency }}<br>
             <strong>  Duration :</strong>  {{ med.duration }}
            </p><br>
          </div>

        </div>
      </div>
    </div>
    <div class="row tex" style="background-color: rgb(200, 214, 214);">
      <p>
        ***Take your medicines as prescribed, exercise regularly,avoid smoking and alcohol, get enough rest, and follow
        up as advised.
      </p>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="text-center mt-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>